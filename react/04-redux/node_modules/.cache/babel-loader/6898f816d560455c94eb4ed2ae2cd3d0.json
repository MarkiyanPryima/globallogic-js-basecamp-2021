{"ast":null,"code":"var _jsxFileName = \"/Users/markiyanpryima/Desktop/03-react-router-formik/src/components/Users/UserForm/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport userApi from '../../../api/userApi';\nimport { MODE } from '../../../constants';\nimport { ID } from '../constants';\nimport FormContainer from './FormContainer';\nimport { getInitialValues, getRequestPayload } from './converter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UserForm({\n  users,\n  setUsers\n}) {\n  _s();\n\n  const {\n    mode,\n    id\n  } = useParams();\n  const history = useHistory();\n  const user = users.find(user => user.id === Number(id));\n  useEffect(() => {\n    if (mode === MODE.VIEW || mode === MODE.EDIT) {\n      if (!user) {\n        userApi.getUser(Number(id)).then(user => setUsers(prevUsers => [...prevUsers, user])).catch(err => window.alert(err.message));\n      }\n    }\n  }, [id, mode, user, setUsers]);\n  const [roles, setRoles] = useState([]);\n  useEffect(() => {\n    userApi.getRoles().then(setRoles);\n  }, [setUsers]);\n\n  const handleSubmit = async values => {\n    try {\n      const payload = getRequestPayload(values);\n\n      switch (mode) {\n        case MODE.CREATE:\n          await userApi.createUser(payload);\n          break;\n\n        case MODE.EDIT:\n          await userApi.editUser(payload);\n          break;\n\n        case MODE.CLONE:\n          await userApi.createUser(payload);\n          break;\n\n        case MODE.DELETE:\n          await userApi.deleteUser(payload);\n          break;\n\n        default:\n          console.error(`Failed to execute this request for ${mode} mode`);\n      }\n    } catch (err) {\n      window.alert(err.message);\n    }\n\n    history.push('/users');\n  };\n\n  const initialValues = getInitialValues(user);\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    initialValues: initialValues,\n    onSubmit: handleSubmit,\n    mode: mode,\n    roles: roles\n  }, `${mode}:${initialValues[ID]}`, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserForm, \"JFiWlhS5bpKoaCB7KD0WpktWgPI=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = UserForm;\nexport default UserForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserForm\");","map":{"version":3,"sources":["/Users/markiyanpryima/Desktop/03-react-router-formik/src/components/Users/UserForm/index.jsx"],"names":["useEffect","useState","useParams","useHistory","userApi","MODE","ID","FormContainer","getInitialValues","getRequestPayload","UserForm","users","setUsers","mode","id","history","user","find","Number","VIEW","EDIT","getUser","then","prevUsers","catch","err","window","alert","message","roles","setRoles","getRoles","handleSubmit","values","payload","CREATE","createUser","editUser","CLONE","DELETE","deleteUser","console","error","push","initialValues"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport userApi from '../../../api/userApi';\nimport { MODE } from '../../../constants';\nimport { ID } from '../constants';\nimport FormContainer from './FormContainer';\nimport { getInitialValues, getRequestPayload } from './converter';\n\nfunction UserForm({ users, setUsers }) {\n  const { mode, id } = useParams();\n  const history = useHistory();\n\n  const user = users.find(user => user.id === Number(id));\n\n  useEffect(() => {\n    if (mode === MODE.VIEW || mode === MODE.EDIT) {\n      if (!user) {\n        userApi\n          .getUser(Number(id))\n          .then(user => setUsers(prevUsers => [...prevUsers, user]))\n          .catch(err => window.alert(err.message));\n      }\n    }\n  }, [id, mode, user, setUsers]);\n\n  const [roles, setRoles] = useState([]);\n  useEffect(() => {\n    userApi.getRoles().then(setRoles);\n  }, [setUsers]);\n\n  const handleSubmit = async values => {\n    try {\n      const payload = getRequestPayload(values);\n\n      switch (mode) {\n        case MODE.CREATE:\n          await userApi.createUser(payload);\n          break;\n        case MODE.EDIT:\n          await userApi.editUser(payload);\n          break;\n        case MODE.CLONE:\n          await userApi.createUser(payload);\n          break;\n        case MODE.DELETE:\n          await userApi.deleteUser(payload);\n          break;\n        default:\n          console.error(`Failed to execute this request for ${mode} mode`);\n      }\n    } catch (err) {\n      window.alert(err.message);\n    }\n\n    history.push('/users');\n  };\n\n  const initialValues = getInitialValues(user);\n\n  return (\n    <FormContainer\n      key={`${mode}:${initialValues[ID]}`}\n      initialValues={initialValues}\n      onSubmit={handleSubmit}\n      mode={mode}\n      roles={roles}\n    />\n  );\n}\n\nexport default UserForm;\n"]},"metadata":{},"sourceType":"module"}