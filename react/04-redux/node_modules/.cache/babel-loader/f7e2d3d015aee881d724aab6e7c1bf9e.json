{"ast":null,"code":"var _jsxFileName = \"/Users/markiyanpryima/Desktop/03-react-router-formik/src/components/Cities/CityForm/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport cityApi from '../../../api/cityApi';\nimport { MODE } from '../../../constants';\nimport { ID } from '../constants';\nimport FormContainer from './FormContainer';\nimport { getInitialValues, getRequestPayload } from './converter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CityForm({\n  cities,\n  setCities\n}) {\n  _s();\n\n  const {\n    mode,\n    id\n  } = useParams();\n  const history = useHistory();\n  const city = cities.find(city => city.id === Number(id));\n  useEffect(() => {\n    if (mode === MODE.VIEW || mode === MODE.EDIT) {\n      if (!city) {\n        cityApi.getCity(Number(id)).then(city => setCities(prevCities => [...prevCities, city])).catch(err => window.alert(err.message));\n      }\n    }\n  }, [id, mode, city, setCities]);\n  const [statuses, setStatuses] = useState([]);\n  useEffect(() => {\n    cityApi.getStatuses().then(setStatuses);\n  }, [setStatuses]);\n\n  const handleSubmit = async values => {\n    try {\n      const payload = getRequestPayload(values);\n\n      switch (mode) {\n        case MODE.CREATE:\n          await cityApi.createCity(payload);\n          break;\n\n        case MODE.EDIT:\n          await cityApi.createCity(payload);\n          break;\n\n        case MODE.CLONE:\n          await cityApi.createCity(payload);\n          break;\n\n        case MODE.DELETE:\n          await cityApi.deleteCity(payload);\n          break;\n\n        default:\n          console.error(`Failed to execute this request for ${mode} mode`);\n      }\n    } catch (err) {\n      window.alert(err.message);\n    }\n\n    history.push('/cities');\n  };\n\n  const initialValues = getInitialValues(city);\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    initialValues: initialValues,\n    onSubmit: handleSubmit,\n    mode: mode,\n    statuses: statuses\n  }, `${mode}:${initialValues[ID]}`, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CityForm, \"MF78bB8cOqU9MkjPW0/XZ61INqM=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = CityForm;\nexport default CityForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CityForm\");","map":{"version":3,"sources":["/Users/markiyanpryima/Desktop/03-react-router-formik/src/components/Cities/CityForm/index.jsx"],"names":["useEffect","useState","useParams","useHistory","cityApi","MODE","ID","FormContainer","getInitialValues","getRequestPayload","CityForm","cities","setCities","mode","id","history","city","find","Number","VIEW","EDIT","getCity","then","prevCities","catch","err","window","alert","message","statuses","setStatuses","getStatuses","handleSubmit","values","payload","CREATE","createCity","CLONE","DELETE","deleteCity","console","error","push","initialValues"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport cityApi from '../../../api/cityApi';\nimport { MODE } from '../../../constants';\nimport { ID } from '../constants';\nimport FormContainer from './FormContainer';\nimport { getInitialValues, getRequestPayload } from './converter';\n\nfunction CityForm({ cities, setCities }) {\n  const { mode, id } = useParams();\n  const history = useHistory();\n\n  const city = cities.find(city => city.id === Number(id));\n\n  useEffect(() => {\n    if (mode === MODE.VIEW || mode === MODE.EDIT) {\n      if (!city) {\n        cityApi\n          .getCity(Number(id))\n          .then(city => setCities(prevCities => [...prevCities, city]))\n          .catch(err => window.alert(err.message));\n      }\n    }\n  }, [id, mode, city, setCities]);\n\n  const [statuses, setStatuses] = useState([]);\n  useEffect(() => {\n    cityApi.getStatuses().then(setStatuses);\n  }, [setStatuses]);\n\n  const handleSubmit = async values => {\n    try {\n      const payload = getRequestPayload(values);\n\n      switch (mode) {\n        case MODE.CREATE:\n          await cityApi.createCity(payload);\n          break;\n        case MODE.EDIT:\n          await cityApi.createCity(payload);\n          break;\n        case MODE.CLONE:\n          await cityApi.createCity(payload);\n          break;\n        case MODE.DELETE:\n          await cityApi.deleteCity(payload);\n          break;\n        default:\n          console.error(`Failed to execute this request for ${mode} mode`);\n      }\n    } catch (err) {\n      window.alert(err.message);\n    }\n\n    history.push('/cities');\n  };\n\n  const initialValues = getInitialValues(city);\n\n  return (\n\n    <FormContainer\n      key={`${mode}:${initialValues[ID]}`}\n      initialValues={initialValues}\n      onSubmit={handleSubmit}\n      mode={mode}\n      statuses={statuses}\n    />\n  );\n}\n\nexport default CityForm;\n"]},"metadata":{},"sourceType":"module"}