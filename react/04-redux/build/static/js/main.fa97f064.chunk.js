(this["webpackJsonp04-redux"]=this["webpackJsonp04-redux"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","age":25,"timestamp":1627934490151},{"id":2,"username":"test-user","role":"user","age":33,"timestamp":1627934784096}]')},36:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r,c=n(0),s=n(6),a=n(27),i=n.n(a),o=n(14),u=n(5),d=n(21),l="view",j="create",b="edit",f="clone",O="delete",h=n(4),p="username",x="role",m="age",v=(r={},Object(h.a)(r,p,""),Object(h.a)(r,x,""),Object(h.a)(r,m,""),r),g=n(1);var w,U,k=function(e){var t=e.id,n=Object(u.i)().url,r=Object(u.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(g.jsxs)("div",{className:"Actions",children:[Object(g.jsx)("button",{onClick:c(l),children:"View"})," ",Object(g.jsx)("button",{onClick:c(b),children:"Edit"})," ",Object(g.jsx)("button",{onClick:c(f),children:"Clone"})," ",Object(g.jsx)("button",{onClick:c(O),children:"Delete"})]})},y=(n(50),n(23)),T=n(2),N=n.n(T),D=n(8),E=n(9),C=n(18),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},R=function(){return"".concat((new Date).getFullYear()," -\n").concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getDate()+1," -\n").concat((new Date).getDate()+1<10?"0"+(new Date).getDate():(new Date).getDate()," - \n").concat((new Date).getHours(),":").concat((new Date).getMinutes()+1<10?"0"+(new Date).getMinutes():(new Date).getMinutes())},S=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},A=n(16),F=(w=A.length,function(){return++w}),I={getUsers:function(){return Object(D.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(1e3);case 2:return console.log("GET /users",A),e.abrupt("return",A);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(D.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:if(!(n=A.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:S(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(D.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:return n=Object(C.a)(Object(C.a)({},e),{},{id:F(),timestamp:R()}),A.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(D.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:if(!~(n=A.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return A[n]=Object(C.a)(Object(C.a)({},e),{},{timestamp:R()}),console.log("PUT /users",A[n]),t.abrupt("return",A[n]);case 9:S(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(D.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:if(!~(n=A.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",A.splice(n,1));case 8:S(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},M=Object(E.b)("users/fetch",Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUsers();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),q=Object(E.b)("roles/fetch",Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getRoles();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),V=Object(E.b)("users/get",function(){var e=Object(D.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(E.b)("users/delete",function(){var e=Object(D.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.deleteUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(E.b)("users/create",function(){var e=Object(D.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.createUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(E.b)("users/clone",function(){var e=Object(D.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.editUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(E.b)("users/edit",function(){var e=Object(D.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.editUser(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(E.c)({name:"users",initialState:{list:[],roles:[],fetchedUsers:!1,fetchedRoles:!1},reducers:{},extraReducers:(U={},Object(h.a)(U,M.pending,(function(e,t){e.fetchedUsers=!1})),Object(h.a)(U,M.fulfilled,(function(e,t){e.fetchedUsers=!0,e.list=Object(y.a)(t.payload)})),Object(h.a)(U,M.rejected,(function(e,t){e.fetchedUsers=!1,alert("Error, failed to load the users")})),Object(h.a)(U,q.pending,(function(e,t){e.fetchedRoles=!1})),Object(h.a)(U,q.fulfilled,(function(e,t){e.fetchRoles=!0,e.roles=Object(y.a)(t.payload)})),Object(h.a)(U,q.rejected,(function(e,t){e.fetchedRoles=!1,alert("Error, failed to load the roles")})),Object(h.a)(U,J.pending,(function(e,t){e.fetchedUsers=!1})),Object(h.a)(U,J.fulfilled,(function(e,t){e.fetchedUsers=!0,e.list=e.list.concat(t.payload)})),Object(h.a)(U,J.rejected,(function(e,t){alert("Error, failed to create a user")})),Object(h.a)(U,B.pending,(function(e,t){e.fetchedUsers=!1})),Object(h.a)(U,B.fulfilled,(function(e,t){e.fetchedUsers=!0,e.list=e.list.map((function(e){return e.id===t.payload.id?t.payload:e}))})),Object(h.a)(U,B.rejected,(function(e,t){alert("Error, failed to edit a user")})),Object(h.a)(U,P.pending,(function(e,t){e.fetchedUsers=!1})),Object(h.a)(U,P.fulfilled,(function(e,t){e.fetchedUsers=!0,e.list=e.list.concat(t.payload)})),Object(h.a)(U,P.rejected,(function(e,t){alert("Error, failed to clone a user")})),Object(h.a)(U,G.pending,(function(e,t){e.fetchedUsers=!1})),Object(h.a)(U,G.fulfilled,(function(e,t){e.fetchedUsers=!0,e.list=e.list.filter((function(e){return e.id!==t.payload[0].id}))})),Object(h.a)(U,G.rejected,(function(e,t){alert("Error, failed to delete a user")})),U)}).reducer,Y=n.p+"static/media/logo.6ce24c58.svg";n(52);var z=function(){return 0===Object(s.d)((function(e){return e.loading}))?null:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"Loading",children:Object(g.jsx)("img",{src:Y,className:"logo",alt:"logo"})}),Object(g.jsx)("div",{className:"overlay"})]})};var K=function(){var e=Object(u.i)().url,t=Object(s.d)((function(e){return e.users.fetchedUsers})),n=Object(s.d)((function(e){return e.users.list})),r=Object(s.c)(),a=t?"hide":"show";return Object(c.useEffect)((function(){t||r(M())}),[t,r]),Object(g.jsxs)("div",{className:"UsersTable",children:[Object(g.jsx)(o.b,{to:"".concat(e,"/user/").concat(j),children:"Create User "}),Object(g.jsxs)("table",{children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"ID"}),Object(g.jsx)("th",{children:"Username"}),Object(g.jsx)("th",{children:"Role"}),Object(g.jsx)("th",{children:"Age"}),Object(g.jsx)("th",{children:"Last Updated At"}),Object(g.jsx)("th",{children:"Actions"})]})}),Object(g.jsx)("tbody",{children:n.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.id}),Object(g.jsx)("td",{children:e.username}),Object(g.jsx)("td",{children:e.role}),Object(g.jsx)("td",{children:e.age}),Object(g.jsx)("td",{children:e.timestamp}),Object(g.jsx)("td",{children:Object(g.jsx)(k,{id:e.id})})]},e.id)}))})]}),Object(g.jsx)("div",{className:a,children:Object(g.jsx)(z,{})})]})},Q=n(17);n(36);var W=function(e){var t=e.name,n=e.label,r=e.validate,c=e.type,s=void 0===c?"text":c,a=e.disabled,i=void 0!==a&&a,o=Object(Q.d)({name:t,validate:r}),u=Object(d.a)(o,1)[0];return Object(g.jsxs)("div",{className:"Input",children:[Object(g.jsxs)("label",{children:[Object(g.jsx)("div",{children:n}),Object(g.jsx)("input",Object(C.a)({type:s,disabled:i},u))]}),Object(g.jsx)(Q.a,{name:t,className:"error",component:"div"})]})};var X=function(e){var t=e.name,n=e.label,r=e.value,c=e.validate,a=e.disabled,i=void 0!==a&&a,o=e.mode,u=Object(Q.d)({name:t,validate:c}),l=Object(d.a)(u,1)[0],j=Object(s.d)((function(e){return e.users.fetchedRoles}));return j="create"===o?"":"Loading...",Object(g.jsxs)("div",{className:"Input",children:[Object(g.jsxs)("label",{children:[Object(g.jsx)("div",{children:n}),Object(g.jsxs)("select",Object(C.a)(Object(C.a)({disabled:i},l),{},{children:[Object(g.jsx)("option",{children:j}),r.map((function(e,t){return Object(g.jsx)("option",{children:e},t)}))]}))]}),Object(g.jsx)(Q.a,{name:t,className:"error",component:"div"})]})};var Z=function(e){var t=e.mode,n=Object(u.g)(),r=Object(Q.e)().isSubmitting;return Object(g.jsxs)("div",{children:[(t===j||t===b||t===f)&&Object(g.jsx)("button",{type:"submit",disabled:r,children:"Save"}),t===O&&Object(g.jsx)("button",{type:"submit",disabled:r,children:"Delete"}),Object(g.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},children:"Cancel"})]})};var $=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles;return Object(g.jsx)(Q.c,{initialValues:t,onSubmit:n,children:Object(g.jsxs)(Q.b,{children:[Object(g.jsx)(W,{name:p,label:"Username",disabled:r===l||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(g.jsx)(X,{mode:r,name:x,label:"Role",value:c,disabled:r===l||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(g.jsx)(W,{name:m,label:"Age",type:"number",disabled:r===l||r===O,validate:function(e){return e?Number(e)<16||Number(e)>110?"Allowed age: from 16 to 110":void 0:"Field is required"}}),Object(g.jsx)("br",{}),Object(g.jsx)(Z,{mode:r})]})})};var _=function(){var e=Object(u.h)(),t=e.mode,n=e.id,r=Object(u.g)(),a=Object(s.c)(),i=Object(s.d)((function(e){return e.users.list})).find((function(e){return e.id===Number(n)})),o=Object(s.d)((function(e){return e.users.roles})),d=Object(s.d)((function(e){return e.users.fetchedUsers})),h=Object(s.d)((function(e){return e.users.fetchedRoles})),p=d?"hide":"show";Object(c.useEffect)((function(){t!==l&&t!==b||i||a(V(n)),d||a(M())}),[a,i,t,n,d]),Object(c.useEffect)((function(){t&&(h||a(q()))}),[t,a,h]);var x=function(){var e=Object(D.a)(N.a.mark((function e(n){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=n,e.t0=t,e.next=e.t0===j?5:e.t0===b?8:e.t0===f?11:e.t0===O?14:17;break;case 5:return e.next=7,a(J(c));case 7:return e.abrupt("break",18);case 8:return e.next=10,a(B(c));case 10:return e.abrupt("break",18);case 11:return e.next=13,a(J(c));case 13:return e.abrupt("break",18);case 14:return e.next=16,a(G(c));case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(t," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:r.push("/users");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),m=i||v;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)($,{initialValues:m,onSubmit:x,mode:t,roles:o},"".concat(t,":").concat(m.id)),Object(g.jsx)("div",{className:p,children:Object(g.jsx)(z,{})})]})};var ee=function(){var e=Object(u.i)().path,t=Object(c.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1];return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(u.d,{children:[Object(g.jsx)(u.b,{exact:!0,path:e,children:Object(g.jsx)(K,{users:r,setUsers:s})}),Object(g.jsx)(u.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(l,"|").concat(j,"|").concat(b,"|").concat(f,"|").concat(O,")/:id?"),children:Object(g.jsx)(_,{users:r,setUsers:s})})]})})};n(53);var te=function(){return Object(g.jsxs)("div",{className:"notFound",children:[Object(g.jsx)("h1",{children:"Error 404"}),Object(g.jsx)("h2",{children:"Not found"})]})},ne=Object(E.c)({name:"todo",initialState:[],reducers:{addTodos:function(e,t){return e.push(t.payload),e},completeTodos:function(e,t){var n=e.find((function(e){return e.id===t.payload}));n.completed=!n.completed},deleteTodos:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),re=ne.actions,ce=re.addTodos,se=re.deleteTodos,ae=re.completeTodos,ie=ne.reducer,oe=Object(s.b)((function(e){return{todos:e.todoList}}),(function(e){return{addTodo:function(t){return e(ce(t))}}}))((function(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1];return Object(g.jsxs)("div",{className:"addTodos",children:[Object(g.jsx)("input",{type:"text",placeholder:"Todos",value:r,onChange:function(e){return function(e){s(e.target.value)}(e)}}),Object(g.jsx)("button",{id:"add",onClick:function(){return r.trim()?e.addTodo({id:Object(E.d)(),completed:!1,item:r}):alert("Todo is empty"),void s("")},children:"Add"})]})})),ue=function(e){var t=e.element,n=e.deleteTodo,r=e.completeTodo;return Object(g.jsxs)("li",{className:"todoEl",children:[Object(g.jsx)("h3",{children:t.item}),Object(g.jsxs)("div",{children:[t.completed?null:Object(g.jsx)("button",{className:"btn1",onClick:function(){return r(t.id)},children:"Done"}),Object(g.jsx)("button",{className:"btn2",onClick:function(){return n(t.id)},children:"Delete"})]}),t.completed?Object(g.jsx)("span",{className:"done",children:"\u2705"}):null]},t.id)},de=(n(54),Object(s.b)((function(e){return{todoList:e.todoList}}),(function(e){return{deleteTodo:function(t){return e(se(t))},completeTodo:function(t){return e(ae(t))}}}))((function(e){return Object(g.jsx)("div",{className:"displayTodos",children:Object(g.jsx)("ul",{children:e.todoList.map((function(t){return Object(g.jsx)(ue,{element:t,deleteTodo:e.deleteTodo,completeTodo:e.completeTodo},t.id)}))})})})));n(55);var le=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("div",{className:"bar",children:Object(g.jsxs)("ul",{className:"nav",children:[Object(g.jsx)("li",{children:Object(g.jsx)(o.b,{to:"/users",children:"Users"})}),Object(g.jsx)("li",{children:Object(g.jsx)(o.b,{to:"/todoList",children:"ToDoList"})})]})}),Object(g.jsxs)(u.d,{children:[Object(g.jsx)(u.a,{exact:!0,from:"/",to:"/users"}),Object(g.jsx)(u.b,{path:"/users",children:Object(g.jsx)(ee,{})}),Object(g.jsxs)(u.b,{path:"/todoList",children:[Object(g.jsx)(oe,{}),Object(g.jsx)(de,{})]}),Object(g.jsx)(te,{})]})]})};var je=function(e){var t=e.children;return Object(g.jsx)(o.a,{basename:"/globallogic-js-basecamp-2021/react/04-redux/build",children:t})},be=(n(56),n(40)),fe=Object(E.a)({reducer:{todoList:ie,users:H},middleware:function(e){return e().concat(be.a)}}),Oe=document.getElementById("root");i.a.render(Object(g.jsx)(c.StrictMode,{children:Object(g.jsx)(je,{children:Object(g.jsx)(s.a,{store:fe,children:Object(g.jsx)(le,{})})})}),Oe)}},[[57,1,2]]]);
//# sourceMappingURL=main.fa97f064.chunk.js.map