(this["webpackJsonp03-react-router-formik"]=this["webpackJsonp03-react-router-formik"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","age":25,"timestamp":1627934490151},{"id":2,"username":"test-user","role":"user","age":33,"timestamp":1627934784096}]')},16:function(e){e.exports=JSON.parse('[{"id":1,"name":"Lviv","status":"city","age":765,"timestamp":1627934490151},{"id":2,"name":"Kyiv","status":"capital","age":1538,"timestamp":1627934784096}]')},34:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n(35),s=n.n(a),i=n(7),u=n(3),o=n(13),b="view",j="create",d="edit",l="clone",O="delete",x=n(9),h=n(2),f=n.n(h),p=n(6),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},v=function(e){return function(){return++e}},g=function(){return"".concat((new Date).getFullYear()," -\n").concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getDate()+1," -\n").concat((new Date).getDate()+1<10?"0"+(new Date).getDate():(new Date).getDate()," - \n").concat((new Date).getHours(),":").concat((new Date).getMinutes()+1<10?"0"+(new Date).getMinutes():(new Date).getMinutes())},w=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},k=n(15),C=v(k.length),y={getUsers:function(){return Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(1e3);case 2:return console.log("GET /users",k),e.abrupt("return",k);case 4:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!(n=k.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /users/".concat(n.id),n),t.abrupt("return",n);case 8:w(e);case 9:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return n=Object(x.a)(Object(x.a)({},e),{},{id:C(),timestamp:g()}),k.push(n),console.log("POST /users",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!~(n=k.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return k[n]=Object(x.a)(Object(x.a)({},e),{},{timestamp:g()}),console.log("PUT /users",k[n]),t.abrupt("return",k[n]);case 9:w(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!~(n=k.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /users",e),t.abrupt("return",k.splice(n,1));case 8:w(e.id);case 9:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=["user","super-user","admin"],console.log("GET /roles",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},N=n(17),D="username",U="role",E="age",S=(r={},Object(N.a)(r,D,""),Object(N.a)(r,U,""),Object(N.a)(r,E,""),r),A=n(0);var T=function(e){var t=e.id,n=Object(u.i)().url,r=Object(u.g)(),c=function(e){return function(){r.push("".concat(n,"/user/").concat(e,"/").concat(t))}};return Object(A.jsxs)("div",{className:"Actions",children:[Object(A.jsx)("button",{onClick:c(b),children:"View"})," ",Object(A.jsx)("button",{onClick:c(d),children:"Edit"})," ",Object(A.jsx)("button",{onClick:c(l),children:"Clone"})," ",Object(A.jsx)("button",{onClick:c(O),children:"Delete"})]})};n(48);var F=function(e){var t=e.users,n=e.setUsers,r=Object(u.i)().url;return Object(c.useEffect)((function(){y.getUsers().then(n)}),[n]),Object(A.jsxs)("div",{className:"UsersTable",children:[Object(A.jsx)(i.b,{to:"".concat(r,"/user/").concat(j),children:"Create User "}),Object(A.jsxs)("table",{children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"ID"}),Object(A.jsx)("th",{children:"Username"}),Object(A.jsx)("th",{children:"Role"}),Object(A.jsx)("th",{children:"Age"}),Object(A.jsx)("th",{children:"Last Updated At"}),Object(A.jsx)("th",{children:"Actions"})]})}),Object(A.jsx)("tbody",{children:t.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e.id}),Object(A.jsx)("td",{children:e.username}),Object(A.jsx)("td",{children:e.role}),Object(A.jsx)("td",{children:e.age}),Object(A.jsx)("td",{children:e.timestamp}),Object(A.jsx)("td",{children:Object(A.jsx)(T,{id:e.id})})]},e.id)}))})]})]})},I=n(27),q=n(8);n(34);var V=function(e){var t=e.name,n=e.label,r=e.validate,c=e.type,a=void 0===c?"text":c,s=e.disabled,i=void 0!==s&&s,u=Object(q.d)({name:t,validate:r}),b=Object(o.a)(u,1)[0];return Object(A.jsxs)("div",{className:"Input",children:[Object(A.jsxs)("label",{children:[Object(A.jsx)("div",{children:n}),Object(A.jsx)("input",Object(x.a)({type:a,disabled:i},b))]}),Object(A.jsx)(q.a,{name:t,className:"error",component:"div"})]})};var G=function(e){var t=e.name,n=e.label,r=e.value,c=e.validate,a=e.disabled,s=void 0!==a&&a,i=Object(q.d)({name:t,validate:c}),u=Object(o.a)(i,1)[0];return Object(A.jsxs)("div",{className:"Input",children:[Object(A.jsxs)("label",{children:[Object(A.jsx)("div",{children:n}),Object(A.jsxs)("select",Object(x.a)(Object(x.a)({disabled:s},u),{},{children:[Object(A.jsx)("option",{}),r.map((function(e,t){return Object(A.jsx)("option",{children:e},t)}))]}))]}),Object(A.jsx)(q.a,{name:t,className:"error",component:"div"})]})};var M=function(e){var t=e.mode,n=Object(u.g)(),r=Object(q.e)().isSubmitting;return Object(A.jsxs)("div",{children:[(t===j||t===d||t===l)&&Object(A.jsx)("button",{type:"submit",disabled:r,children:"Save"}),t===O&&Object(A.jsx)("button",{type:"submit",disabled:r,children:"Delete"}),Object(A.jsx)("button",{type:"button",onClick:function(){return n.push("/users")},children:"Cancel"})]})};var L=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.roles;return Object(A.jsx)(q.c,{initialValues:t,onSubmit:n,children:Object(A.jsxs)(q.b,{children:[Object(A.jsx)(V,{name:D,label:"Username",disabled:r===b||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(A.jsx)(G,{name:U,label:"Role",value:c,disabled:r===b||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(A.jsx)(V,{name:E,label:"Age",type:"number",disabled:r===b||r===O,validate:function(e){return e?Number(e)<16||Number(e)>110?"Allowed age: from 16 to 110":void 0:"Field is required"}}),Object(A.jsx)("br",{}),Object(A.jsx)(M,{mode:r})]})})};var P=function(e){var t=e.users,n=e.setUsers,r=Object(u.h)(),a=r.mode,s=r.id,i=Object(u.g)(),x=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==b&&a!==d||x||y.getUser(Number(s)).then((function(e){return n((function(t){return[].concat(Object(I.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,x,n]);var h=Object(c.useState)([]),m=Object(o.a)(h,2),v=m[0],g=m[1];Object(c.useEffect)((function(){y.getRoles().then(g)}),[n]);var w=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=a,e.next=e.t0===j?5:e.t0===d?8:e.t0===l?11:e.t0===O?14:17;break;case 5:return e.next=7,y.createUser(n);case 7:return e.abrupt("break",18);case 8:return e.next=10,y.editUser(n);case 10:return e.abrupt("break",18);case 11:return e.next=13,y.createUser(n);case 13:return e.abrupt("break",18);case 14:return e.next=16,y.deleteUser(n);case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(a," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:i.push("/users");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e||S}(x);return Object(A.jsx)(L,{initialValues:k,onSubmit:w,mode:a,roles:v},"".concat(a,":").concat(k.id))};var R=function(){var e=Object(u.i)().path,t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(A.jsx)("div",{className:"App",children:Object(A.jsxs)(u.d,{children:[Object(A.jsx)(u.b,{exact:!0,path:e,children:Object(A.jsx)(F,{users:r,setUsers:a})}),Object(A.jsx)(u.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(b,"|").concat(j,"|").concat(d,"|").concat(l,"|").concat(O,")/:id?"),children:Object(A.jsx)(P,{users:r,setUsers:a})})]})})};n(49);var J,B=function(){return Object(A.jsxs)("div",{className:"notFound",children:[Object(A.jsx)("h1",{children:"Error 404"}),Object(A.jsx)("h2",{children:"Not found"})]})},H=(n(50),n(16)),K=v(H.length),Y={getCities:function(){return Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(1e3);case 2:return console.log("GET /cities",H),e.abrupt("return",H);case 4:case"end":return e.stop()}}),e)})))()},getCity:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!(n=H.find((function(t){return t.id===e})))){t.next=8;break}return console.log("GET /cities/".concat(n.id),n),t.abrupt("return",n);case 8:w(e);case 9:case"end":return t.stop()}}),t)})))()},createCity:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return n=Object(x.a)(Object(x.a)({},e),{},{id:K(),timestamp:g()}),H.push(n),console.log("POST /cities",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},editCity:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!~(n=H.findIndex((function(t){return t.id===e.id})))){t.next=9;break}return H[n]=Object(x.a)(Object(x.a)({},e),{},{timestamp:g()}),console.log("PUT /cities",H[n]),t.abrupt("return",H[n]);case 9:w(e.id);case 10:case"end":return t.stop()}}),t)})))()},deleteCity:function(e){return Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(!~(n=H.findIndex((function(t){return t.id===e.id})))){t.next=8;break}return console.log("DELETE /cities",e),t.abrupt("return",H.splice(n,1));case 8:w(e.id);case 9:case"end":return t.stop()}}),t)})))()},getStatuses:function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=["city","capital","village"],console.log("GET /statuses",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))()}},z="name",Q="status",W="age",X=(J={},Object(N.a)(J,z,""),Object(N.a)(J,Q,""),Object(N.a)(J,W,""),J);var Z=function(e){var t=e.id,n=Object(u.i)().url,r=Object(u.g)(),c=function(e){return function(){r.push("".concat(n,"/city/").concat(e,"/").concat(t))}};return Object(A.jsxs)("div",{className:"Actions",children:[Object(A.jsx)("button",{onClick:c(b),children:"View"})," ",Object(A.jsx)("button",{onClick:c(d),children:"Edit"})," ",Object(A.jsx)("button",{onClick:c(l),children:"Clone"})," ",Object(A.jsx)("button",{onClick:c(O),children:"Delete"})]})};n(51);var $=function(e){var t=e.cities,n=e.setCities,r=Object(u.i)().url;return Object(c.useEffect)((function(){Y.getCities().then(n)}),[n]),Object(A.jsxs)("div",{className:"CitiesTable",children:[Object(A.jsx)(i.b,{to:"".concat(r,"/city/").concat(j),children:"Create City "}),Object(A.jsxs)("table",{children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"ID"}),Object(A.jsx)("th",{children:"Name"}),Object(A.jsx)("th",{children:"Status"}),Object(A.jsx)("th",{children:"Age"}),Object(A.jsx)("th",{children:"Last Updated At"}),Object(A.jsx)("th",{children:"Actions"})]})}),Object(A.jsx)("tbody",{children:t.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e.id}),Object(A.jsx)("td",{children:e.name}),Object(A.jsx)("td",{children:e.status}),Object(A.jsx)("td",{children:e.age}),Object(A.jsx)("td",{children:e.timestamp}),Object(A.jsx)("td",{children:Object(A.jsx)(Z,{id:e.id})})]},e.id)}))})]})]})};var _=function(e){var t=e.mode,n=Object(u.g)(),r=Object(q.e)().isSubmitting;return Object(A.jsxs)("div",{children:[(t===j||t===d||t===l)&&Object(A.jsx)("button",{type:"submit",disabled:r,children:"Save"}),t===O&&Object(A.jsx)("button",{type:"submit",disabled:r,children:"Delete"}),Object(A.jsx)("button",{type:"button",onClick:function(){return n.push("/cities")},children:"Cancel"})]})};var ee=function(e){var t=e.initialValues,n=e.onSubmit,r=e.mode,c=e.statuses;return Object(A.jsx)(q.c,{initialValues:t,onSubmit:n,children:Object(A.jsxs)(q.b,{children:[Object(A.jsx)(V,{name:z,label:"Name",disabled:r===b||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(A.jsx)(G,{name:Q,label:"Status",value:c,disabled:r===b||r===O,validate:function(e){if(!e)return"Field is required"}}),Object(A.jsx)(V,{name:W,label:"Age",type:"number",disabled:r===b||r===O,validate:function(e){return e?Number(e)<0?"Age can't be less than 0":void 0:"Field is required"}}),Object(A.jsx)("br",{}),Object(A.jsx)(_,{mode:r})]})})};var te=function(e){var t=e.cities,n=e.setCities,r=Object(u.h)(),a=r.mode,s=r.id,i=Object(u.g)(),x=t.find((function(e){return e.id===Number(s)}));Object(c.useEffect)((function(){a!==b&&a!==d||x||Y.getCity(Number(s)).then((function(e){return n((function(t){return[].concat(Object(I.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[s,a,x,n]);var h=Object(c.useState)([]),m=Object(o.a)(h,2),v=m[0],g=m[1];Object(c.useEffect)((function(){Y.getStatuses().then(g)}),[g]);var w=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t,e.t0=a,e.next=e.t0===j?5:e.t0===d?8:e.t0===l?11:e.t0===O?14:17;break;case 5:return e.next=7,Y.createCity(n);case 7:return e.abrupt("break",18);case 8:return e.next=10,Y.editCity(n);case 10:return e.abrupt("break",18);case 11:return e.next=13,Y.createCity(n);case 13:return e.abrupt("break",18);case 14:return e.next=16,Y.deleteCity(n);case 16:return e.abrupt("break",18);case 17:console.error("Failed to execute this request for ".concat(a," mode"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),window.alert(e.t1.message);case 23:i.push("/cities");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e||X}(x);return Object(A.jsx)(ee,{initialValues:k,onSubmit:w,mode:a,statuses:v},"".concat(a,":").concat(k.id))};var ne=function(){var e=Object(u.i)().path,t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(A.jsx)("div",{className:"App",children:Object(A.jsxs)(u.d,{children:[Object(A.jsx)(u.b,{exact:!0,path:e,children:Object(A.jsx)($,{cities:r,setCities:a})}),Object(A.jsx)(u.b,{exact:!0,path:"".concat(e,"/city/:mode(").concat(b,"|").concat(j,"|").concat(d,"|").concat(l,"|").concat(O,")/:id?"),children:Object(A.jsx)(te,{cities:r,setCities:a})})]})})};var re=function(){return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("div",{className:"bar",children:Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/users",children:"Users"})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/cities",children:"Cities"})})]})}),Object(A.jsxs)(u.d,{children:[Object(A.jsx)(u.a,{exact:!0,from:"/",to:"/users"}),Object(A.jsx)(u.b,{path:"/users",children:Object(A.jsx)(R,{})}),Object(A.jsx)(u.b,{path:"/cities",children:Object(A.jsx)(ne,{})}),Object(A.jsx)(B,{})]})]})};var ce=function(e){var t=e.children;return Object(A.jsx)(i.a,{basename:"/globallogic-js-basecamp-2021/react/03-react-router-formik/build",children:t})},ae=(n(52),document.getElementById("root"));s.a.render(Object(A.jsx)(c.StrictMode,{children:Object(A.jsx)(ce,{children:Object(A.jsx)(re,{})})}),ae)}},[[53,1,2]]]);
//# sourceMappingURL=main.c06aa896.chunk.js.map